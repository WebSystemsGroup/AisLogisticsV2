@model AisLogistics.App.Models.AdditionalForms.Regional.Service9Model
@{
    IEnumerable<SelectListItem> Dop_Info = new List<SelectListItem>
    {
        new("Не выбрано", ""),
        new("являюсь одинокой матерью ребенка", "являюсь одинокой матерью ребенка"),
        new("отец ребенка проходит военную службу по призыву»", "отец ребенка проходит военную службу по призыву»"),
        new("ребенок проживает со мной", "ребенок проживает со мной"),
        new("семья является многодетной семьей", "семья является многодетной семьей"),
        new("крорганине получаю в установленном законодательством Республики Алтай порядке денежных средств на содержание ребенка, находящихся под опекой попечительством", "крорганине получаю в установленном законодательством Республики Алтай порядке денежных средств на содержание ребенка, находящихся под опекой попечительством"),
        new("не получаю ЕДВ по предыдущему месту жительства или предыдущему месту  пребывания на территории  Республики Алтай (в случае представления документов для получения ЕДВ по новому месту жительства или новому месту пребывания)", "не получаю ЕДВ по предыдущему месту жительства или предыдущему месту  пребывания на территории  Республики Алтай (в случае представления документов для получения ЕДВ по новому месту жительства или новому месту пребывания)"),
        new("не получаю ЕДВ по месту жительства на территории Республики Алтай (в случае  представления документов для получения ЕДВ по месту пребывания)", "не получаю ЕДВ по месту жительства на территории Республики Алтай (в случае  представления документов для получения ЕДВ по месту пребывания)"),
        new("второй родитель не получает ЕДВ по месту жительства или по месту пребывания на территории Республики Алтай (при наличии двух родителей)»", "второй родитель не получает ЕДВ по месту жительства или по месту пребывания на территории Республики Алтай (при наличии двух родителей)"),
        new("ребенок (дети) не находится на полном государственном обеспечении", "ребенок (дети) не находится на полном государственном обеспечении"),
        new("супруг (родитель) отбывает наказание в виде лишения свободы", "супруг (родитель) отбывает наказание в виде лишения свободы"),
        new("супруг (родитель) заключен под стражу", "супруг (родитель) заключен под стражу"),
        new("супруг  (родитель)  находится  на  принудительном лечении по решению суда»", "супруг  (родитель)  находится  на  принудительном лечении по решению суда"),
        new("место нахождения  разыскиваемого супруга (родителя)  в  соответствии с федеральным законодательством не установлено", "место нахождения  разыскиваемого супруга (родителя)  в  соответствии с федеральным законодательством не установлено"),
        new("супруг (родитель) уклоняется от уплаты алиментов", "супруг (родитель) уклоняется от уплаты алиментов"),

    };
}
<div id="additional-data-content">
    <div class="row g-3">
        <div class="col-8 mx-auto">
        <h5 class="my-2">Заявитель</h5>
            <div class="row mb-3">
                <div class="col-12">
                    <label class="form-label" asp-for="Fio">ФИО</label>
                    <input type="text" asp-for="Fio" class="form-control">
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-4">
                    <label class="form-label" asp-for="BirthDate">Дата рождения</label>
                    <div class="input-group input-group-merge">
                        <span class="input-group-text">
                            <i class="bx bx-calendar"></i>
                        </span>
                        <input asp-for="BirthDate" type="text"
                               class="form-control pickdate">
                    </div>
                </div>
                <div class="col-4">
                    <label class="form-label" asp-for="SNILS">СНИЛС</label>
                    <input type="text" class="form-control" asp-for="SNILS">
                </div>

                <div class="col-4">
                    <label class="form-label" asp-for="Phone">Телефон</label>
                    <input type="text" asp-for="Phone" class="form-control">
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-12">
                    <label class="form-label" asp-for="ResidenceAddress">Адрес места жительства</label>
                    <input type="text" asp-for="ResidenceAddress" class="form-control">
                </div>
            </div>
            <h6 class="my-2">Паспортные данные</h6>
            <div class="row mb-3">
                <div class="col-4">
                    <label class="form-label" asp-for="DocSeries">Серия</label>
                    <input type="text" class="form-control" asp-for="DocSeries">
                </div>
                <div class="col-4">
                    <label class="form-label" asp-for="DocNumber">Номер</label>
                    <input type="text" class="form-control" asp-for="DocNumber">
                </div>
                <div class="col-4">
                    <label class="form-label" asp-for="DocIssueDate">Дата выдачи</label>
                    <div class="input-group input-group-merge">
                        <span class="input-group-text">
                            <i class="bx bx-calendar"></i>
                        </span>
                        <input asp-for="DocIssueDate" type="text"
                               class="form-control pickdate">
                    </div>
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-12">
                    <label class="form-label" asp-for="DocIssuer">Кем выдан</label>
                    <input type="text" class="form-control" asp-for="DocIssuer">
                </div>
            </div>
            <hr />
            <br />
            <h5 class="my-2">Данные о детях:</h5>
            <div id="appliedChildDocumentList" data-clone-list>
                @for (var i = 0; i < Model.AppliedChildList.Length; i++)
                {
                    <div class="g-3" id="clone@(i)" data-id="@i" data-clone>
                        <h6 class="my-2 title">Pебенок @(i+1)</h6>
                        <div class="row mb-1 align-items-center">
                            <div class="col-11">
                                <div class="row mb-3 align-items-end">
                                    <div class="col-10">
                                        <label class="form-label" asp-for="AppliedChildList[i].Fio_Child">Фамилия, имя, отчество ребенка</label>
                                        <input type="text" class="form-control" asp-for="AppliedChildList[i].Fio_Child">
                                    </div>
                                    <div class="col-2">
                                        <label class="form-label" asp-for="AppliedChildList[i].BirthDate_Child">ДАТА РОЖДЕНИЯ РЕБЕНКА</label>
                                        <div class="input-group input-group-merge">
                                            <span class="input-group-text">
                                                <i class="bx bx-calendar"></i>
                                            </span>
                                            <input asp-for="AppliedChildList[i].BirthDate_Child" type="text"
                                               class="form-control pickdate">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-1">
                                <button type="button" class="btn btn-danger" onclick="blockRemove(this)"><i class="bi bi-trash-alt"></i></button>
                            </div>

                        </div>
                    </div>
                }
            </div>
            <div class="row justify-content-center">
                <div class="col-2">
                    <button type="button" class="btn btn-primary" id="addAppliedChildDocument"><i class="bi bi-plus"></i></button>
                </div>
            </div>
            <hr />
            <br />
            <div class="row mb-3 align-items-center">
                <div class="col-3">
                    <h5 class="my-2">Доходы членов семьи</h5>
                </div>
                <div class="col-3">
                    <label class="form-label" asp-for="WithDate">за период с</label>
                    <div class="input-group input-group-merge">
                        <span class="input-group-text">
                            <i class="bx bx-calendar"></i>
                        </span>
                        <input asp-for="WithDate" type="text"
                               class="form-control pickdate">
                    </div>
                </div>
                <div class="col-3">
                    <label class="form-label" asp-for="ByDate">по</label>
                    <div class="input-group input-group-merge">
                        <span class="input-group-text">
                            <i class="bx bx-calendar"></i>
                        </span>
                        <input asp-for="ByDate" type="text"
                               class="form-control pickdate">
                    </div>
                </div>
            </div>

            <div id="appliedFamilyList" data-clone-list>
                @for (var i = 0; i < Model.AppliedFamilyList.Length; i++)
                {
                    <div class="g-3" id="clone@(i)" data-id="@i" data-clone>
                        <h6 class="my-2 title">Доход члена семьи</h6>
                        <div class="row mb-1 align-items-center">
                            <div class="col-11">
                                <div class="row mb-3">
                                    <div class="col-9">
                                        <label class="form-label" asp-for="AppliedFamilyList[i].Fio_Family">ФИО</label>
                                        <input type="text" class="form-control" asp-for="AppliedFamilyList[i].Fio_Family">
                                    </div>
                                    <div class="col-3">
                                        <label class="form-label" asp-for="AppliedFamilyList[i].BirthDate_Family">ДАТА РОЖДЕНИЯ</label>
                                        <div class="input-group input-group-merge">
                                            <span class="input-group-text">
                                                <i class="bx bx-calendar"></i>
                                            </span>
                                            <input asp-for="AppliedFamilyList[i].BirthDate_Family" type="text"
                                               class="form-control pickdate">
                                        </div>
                                    </div>
                                </div>



                                <div class="row mb-3">
                                    <div class="col-4">
                                        <label class="form-label" asp-for="AppliedFamilyList[i].Grounds_Withholding">месяц</label>
                                        <input type="text" class="form-control" asp-for="AppliedFamilyList[i].Grounds_Withholding">
                                    </div>
                                    <div class="col-4">
                                        <label class="form-label" asp-for="AppliedFamilyList[i].Type_Income">Вид</label>
                                        <input type="text" class="form-control" asp-for="AppliedFamilyList[i].Type_Income">
                                    </div>
                                    <div class="col-4">
                                        <label class="form-label" asp-for="AppliedFamilyList[i].Amount_Income">Сумма</label>
                                        <input type="text" class="form-control" asp-for="AppliedFamilyList[i].Amount_Income">
                                    </div>
                                </div>


                            </div>

                            <div class="col-1">
                                <button type="button" class="btn btn-danger content-center " onclick="blockRemove(this)"><i class="bi bi-trash-alt"></i></button>
                            </div>
                        </div>
                    </div>

                }

            </div>
            <div class="row justify-content-center">
                <div class="col-2">
                    <button type="button" class="btn btn-primary" id="addAppliedFamilyDocument"><i class="bi bi-plus"></i></button>
                </div>
            </div>


            <hr />
            <div class="row mb-3">
                <div class="col-4">
                    <label class="form-label" asp-for="Srednee">Среднедушевой доход семьи</label>
                    <input type="text" asp-for="Srednee" class="form-control">
                </div>
                <div class="col-4">
                    <label class="form-label" asp-for="Min">величина прожиточного минимума</label>
                    <input type="text" asp-for="Min" class="form-control">
                </div>
                <div class="col-3">
                    <label class="form-label" asp-for="MinDate">на</label>
                    <div class="input-group input-group-merge">
                        <span class="input-group-text">
                            <i class="bx bx-calendar"></i>
                        </span>
                        <input asp-for="MinDate" type="text"
                               class="form-control pickdate">
                    </div>
                </div>
            </div>
            <hr />
            <br />
            <h5 class="my-2">Исключить выплаченные алименты </h5>
            <div class="row mb-3 align-items-end">
                <div class="col-3">
                    <label class="form-label" asp-for="Exclude_Income_Sum">сумма выплаченных алиментов  </label>
                    <input type="text" asp-for="Exclude_Income_Sum" class="form-control">
                </div>
                <div class="col-9">
                    <label class="form-label" asp-for="Exclude_Income_Info">основание для удержания алиментов , ФИО лица, в пользу которого производятся удержания</label>
                    <input type="text" asp-for="Exclude_Income_Info" class="form-control">
                </div>

            </div>
            <div class="row mb-3">
                <div class="col-12">
                    <label class="form-label" asp-for="Dop_Info">ДополнительНые сведения</label>
                    <select class="select2-search" asp-items="@Dop_Info" asp-for="Dop_Info"></select>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-12">
                    <label class="form-label" asp-for="Dop_InfoReason">причины невозможности  взыскание  алиментов  с супруга (родителей) </label>
                    <input type="text" asp-for="Dop_InfoReason" class="form-control">
                </div>
            </div>

            <hr />
            <br />
            <h5 class="my-2">Данные для выплаты</h5>
            <div class="row mb-3 valign-items-end">
                <div class="col-4">
                    <label class="form-label" asp-for="PaymentMethod">Способ выплаты</label>
                     <select class="select2-nosearch" asp-for="PaymentMethod">
                        <option value="ПАО «Сбербанк России»">ПАО «Сбербанк России»</option>
                        <option value="АО «Россельхозбанк»">АО «Россельхозбанк»</option>
                        <option value="ВТБ (ПАО)">ВТБ (ПАО)</option>
                        <option value="ФО «Альфа-банк»">ФО «Альфа-банк»</option>
                        <option value="ФО «Тинькофф Банк»">ФО «Тинькофф Банк»</option>
                    </select>
                </div>
                <div class="col-4">
                    <label class="form-label" asp-for="PersonalAccount">Лицевой счет</label>
                    <input type="text" asp-for="PersonalAccount" class="form-control">
                </div>
                <div class="col-4">
                    <label class="form-label" asp-for="PochtalAccount">почтовое отделение </label>
                    <input type="text" asp-for="PochtalAccount" class="form-control">
                </div>
            </div>
            <hr />
            <br />
            <h5 class="my-2">Приложенные копии документов</h5>
            <div id="appliedDocumentList" data-clone-list>
                @for (var i = 0; i < Model.AppliedDocumentList.Length; i++)
                {
                    <div class="g-3" id="clone@(i)" data-id="@i" data-clone>
                        <div class="row mb-1 align-items-center">
                            <h6 class="my-2 title">Документ @(i+1)</h6>
                            <div class="col-11">
                                <div class="row mb-3 align-items-end">
                                    <div class="col-9">
                                        <label class="form-label" asp-for="AppliedDocumentList[i].Name">Наименование</label>
                                        <input type="text" list="Docs" asp-for="AppliedDocumentList[i].Name" class="form-control">
                                        <datalist id="Docs">
                                            <option value="Документ удостоверяющий личность">Документ удостоверяющий личность</option>
                                            <option value="Свидетельство о рождении">Свидетельство о рождении</option>
                                            <option value="Свидетельство о заключении брака">Свидетельство о заключении брака</option>
                                            <option value="Свидетельство о расторжении брака">Свидетельство о расторжении брака</option>
                                            <option value="Свидетельство об установлении отцовства">Свидетельство об установлении отцовства</option>
                                            <option value="Расчётный счёт">Расчётный счёт</option>
                                            <option value="Сберкнижка">Сберкнижка</option>
                                            <option value="Трудовая книжка">Трудовая книжка</option>
                                            <option value="Свидетельство о регистрации по месту жительства/пребывания">Свидетельство о регистрации по месту жительства/пребывания</option>
                                            <option value="Удостоверение">Удостоверение</option>
                                            <option value="Справка МСЭ">Справка МСЭ</option>
                                        </datalist>
                                    </div>
                                    <div class="col-3">
                                        <label class="form-label" asp-for="AppliedDocumentList[i].CopyCount">Количество экземпляров</label>
                                        <input type="number" class="form-control" asp-for="AppliedDocumentList[i].CopyCount">
                                    </div>
                                </div>
                            </div>
                            <div class="col-1">
                                <button type="button" class="btn btn-danger" onclick="blockRemove(this)"><i class="bi bi-trash-alt"></i></button>
                            </div>
                        </div>
                    </div>
                }
            </div>
            <div class="row justify-content-center">
                <div class="col-2">
                    <button type="button" class="btn btn-primary" id="addAppliedDocument"><i class="bi bi-plus"></i></button>
                </div>
            </div>
            <hr />
        </div>
    </div>




    <div id="originalBlock">


        <div class="g-3" id="appliedChildDocument" data-id="" data-original>
            <hr />
            <h6 class="my-2 title">Pебенок 0</h6>
            <div class="row mb-1 align-items-center">
                <div class="col-11">
                    <div class="row mb-3 align-items-end">
                        <div class="col-10">
                            <label class="form-label" asp-for="AppliedChildList[0].Fio_Child">Фамилия, имя, отчество ребенка</label>
                            <input type="text" class="form-control" asp-for="AppliedChildList[0].Fio_Child">
                        </div>
                        <div class="col-2">
                            <label class="form-label" asp-for="AppliedChildList[0].BirthDate_Child">Дата рождения ребенка</label>
                            <div class="input-group input-group-merge">
                                <span class="input-group-text">
                                    <i class="bx bx-calendar"></i>
                                </span>
                                <input asp-for="AppliedChildList[0].BirthDate_Child" type="text"
                                       class="form-control pickdate">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-1">
                    <button type="button" class="btn btn-danger" onclick="blockRemove(this)"><i class="bi bi-trash-alt"></i></button>
                </div>
            </div>
        </div>
        <div id="appliedFamilyDocument" data-id="" data-original>

            <hr />
            <h6 class="my-2 title">Доход члена семьи</h6>
            <div class="row mb-1 align-items-center">
                <div class="col-11">
                    <div class="row mb-3">
                        <div class="col-9">
                            <label class="form-label" asp-for="AppliedFamilyList[0].Fio_Family">ФИО</label>
                            <input type="text" class="form-control" asp-for="AppliedFamilyList[0].Fio_Family">
                        </div>
                        <div class="col-3">
                            <label class="form-label" asp-for="AppliedFamilyList[0].BirthDate_Family">ДАТА РОЖДЕНИЯ</label>
                            <div class="input-group input-group-merge">
                                <span class="input-group-text">
                                    <i class="bx bx-calendar"></i>
                                </span>
                                <input asp-for="AppliedFamilyList[0].BirthDate_Family" type="text"
                                       class="form-control pickdate">
                            </div>
                        </div>

                    </div>

                    <div class="row mb-3 ">
                        <div class="col-4">
                            <label class="form-label" asp-for="AppliedFamilyList[0].Grounds_Withholding">месяц</label>
                            <input type="text" class="form-control" asp-for="AppliedFamilyList[0].Grounds_Withholding">
                        </div>
                        <div class="col-4">
                            <label class="form-label" asp-for="AppliedFamilyList[0].Type_Income">Вид</label>
                            <input type="text" class="form-control" asp-for="AppliedFamilyList[0].Type_Income">
                        </div>
                        <div class="col-4">
                            <label class="form-label" asp-for="AppliedFamilyList[0].Amount_Income">Сумма</label>
                            <input type="text" class="form-control" asp-for="AppliedFamilyList[0].Amount_Income">
                        </div>


                    </div>
                </div>
                <div class="col-1">
                    <button type="button" class="btn btn-danger content-center " onclick="blockRemove(this)"><i class="bi bi-trash-alt"></i></button>
                </div>

            </div>
        </div>


        <div class="g-3" id="appliedDocument" data-id="" data-original>
            <hr />
            <h6 class="my-2 title">Документ 0</h6>
            <div class="row mb-1 align-items-center">
                <div class="col-11">
                    <div class="row mb-3">
                        <div class="col-9">
                            <label class="form-label" asp-for="AppliedDocumentList[0].Name">Наименование</label>
                            <input type="text" list="DocsOriginal" asp-for="AppliedDocumentList[0].Name" class="form-control">
                            <datalist id="DocsOriginal">
                                <option value="Документ удостоверяющий личность">Документ удостоверяющий личность</option>
                                <option value="Свидетельство о рождении">Свидетельство о рождении</option>
                                <option value="Свидетельство о заключении брака">Свидетельство о заключении брака</option>
                                <option value="Свидетельство о расторжении брака">Свидетельство о расторжении брака</option>
                                <option value="Свидетельство об установлении отцовства">Свидетельство об установлении отцовства</option>
                                <option value="Расчётный счёт">Расчётный счёт</option>
                                <option value="Сберкнижка">Сберкнижка</option>
                                <option value="Трудовая книжка">Трудовая книжка</option>
                                <option value="Свидетельство о регистрации по месту жительства/пребывания">Свидетельство о регистрации по месту жительства/пребывания</option>
                                <option value="Удостоверение">Удостоверение</option>
                                <option value="Справка МСЭ">Справка МСЭ</option>
                            </datalist>
                        </div>
                        <div class="col-3">
                            <label class="form-label" asp-for="AppliedDocumentList[0].CopyCount">Количество экземпляров</label>
                            <input type="number" class="form-control" asp-for="AppliedDocumentList[0].CopyCount">
                        </div>
                    </div>
                </div>
                <div class="col-1">
                    <button type="button" class="btn btn-danger" onclick="blockRemove(this)"><i class="bi bi-trash-alt bx-sm"></i></button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var additionalForm = $('#additional-data-content');
    var originalBlock = $('#originalBlock');
    var btnNext = $('.btn-next');
    var applicant = {
        fio: $("#Fio"),
        birthDate: $("#BirthDate"),
        phone: $("#Phone"),
        SNILS: $("#SNILS"),
        docSeries: $("#DocSeries"),
        docNumber: $("#DocNumber"),
        docIssueDate: $("#DocIssueDate"),
        docIssuer: $("#DocIssuer"),
        residenceAddress: $("#ResidenceAddress")
    };
    $(function() {
        btnNext.on('click', function appContent() {
            applicant.fio.val($("#customer_LastName").val() + ' ' + $("#customer_FirstName").val() + ' ' + $("#customer_SecondName").val());
            applicant.birthDate.val($("#customer_DocumentBirthDate").val());
            applicant.phone.val($("#customer_CustomerPhone1").val());
            applicant.SNILS.val($("#customer_CustomerSnils").val());
            applicant.docSeries.val($("#customer_DocumentSerial").val());
            applicant.docNumber.val($("#customer_DocumentNumber").val());
            applicant.docIssueDate.val($("#customer_DocumentIssueDate").val());
            applicant.docIssuer.val($("#customer_DocumentIssueBody").val());
            applicant.residenceAddress.val($("#customer_CustomerAddressResidence").val())
        });
        originalBlock.find('[data-original]').each(function(_, item) {
            renameBlock($(item), 100, true);
            visibilityBlock($(item), true, true);
        });

        additionalForm.find('#addAppliedDocument').on('click', () => addForm('appliedDocumentList', 'appliedDocument'));
        additionalForm.find('#addAppliedFamilyDocument').on('click', () => addForm('appliedFamilyList', 'appliedFamilyDocument'));
        additionalForm.find('#addAppliedChildDocument').on('click', () => addForm('appliedChildDocumentList', 'appliedChildDocument'));

        additionalForm.find('[data-disabled]').each(function() {
            visibilityBlock($(this), true, true);
        });


        additionalForm.find("select.select2-search").each(function() {
            $(this).select2({
                //dropdownParent: $("#mainModal"),
            });
        });

        additionalForm.find("select.select2-nosearch").each(function() {
            $(this).select2({
                minimumResultsForSearch: Infinity,
            });
        });

        let options = { clearIncomplete: true, showMaskOnHover: false };
        additionalForm.find('#SNILS').inputmask("999-999-999 99", options);
        additionalForm.find('#Phone').inputmask("+7(999) 999-99-99", { clearIncomplete: true, showMaskOnHover: false });
        additionalForm.find('#PersonalAccount').inputmask("9{20}", options);
         additionalForm.find('[id$="Amount_Income"]').inputmask("9{1,},9{1,2}", { clearIncomplete: true, showMaskOnHover: false });
        additionalForm.find(".pickdate").datepicker({
            language: "ru",
            autoclose: true,
        }).inputmask("99.99.9999", options);

        function addForm(cloneListId, originalId) { //Динамическое добавление Принимает (Куда Откуда)
            let $cloneList = additionalForm.find(`#${cloneListId}`);
            let $original = originalBlock.find(`#${originalId}`);
            let $cloneBlock = $original.clone(true);
            let indexId = $cloneList.find('[data-clone]').length;
            renameBlock($cloneBlock, indexId);
            blockInit($cloneBlock);
            $cloneList.find("select").each(function() {
                $(this).select2('destroy');
            });
            $cloneList.append($cloneBlock);
            select2Init($cloneList);
        }

        function blockInit($block) {
            visibilityBlock($block, false, false);

            $block.find("input[type='text']").each(function() {
                $(this).val("");
            });
        }
    });
    function select2Init($block) {
        $block.find("select.select2-nosearch").each(function() {
            $(this).select2({
                minimumResultsForSearch: Infinity
            });
        });
         $block.find(".pickdate").datepicker({
            language: "ru",
            autoclose: true,
        }).inputmask("99.99.9999", options);
        $block.find('[id$="Amount_Income"]').inputmask("9{1,},9{1,2}", { clearIncomplete: true, showMaskOnHover: false });
        $block.find("select.select2-search").each(function() {
            $(this).select2({
            });
        });
    }
    function renameBlock($cloneBlock, indexId, initOriginal = false) {
        if (!initOriginal) {
            $cloneBlock.find('.title').text($cloneBlock.find('.title').text().replace(/\d+/, indexId + 1));
            $cloneBlock.attr("id", `${$cloneBlock.attr("id")}${indexId}`);
            $cloneBlock.attr('data-id', indexId);
            $cloneBlock.attr('data-clone', '');
            $cloneBlock.removeAttr('data-original');
        }

        $cloneBlock.find('input, select, div').each(function() {
            $(this).attr('id', $(this).attr('id')?.replace(/\d+/, indexId));
            if ($(this).is('[name]')) {
                $(this).attr('name', $(this).attr('name').replace(/\d+/, indexId));
            }
        });

        $cloneBlock.find('label').each(function() {
            $(this).attr('for', $(this).attr('for').replace(/\d+/, indexId));
        });
    }

    function blockRemove(el) {
        let $cloneList = $(el).closest('[data-clone-list]');
        el.closest('[data-clone]').remove();
        $cloneList.find('[data-clone]').each(function(index, item) {
            renameBlock($(item), index);
        });
    }

    function visibilityBlock($block, hide, isDisabled) {
        switch (hide) {
            case true:
                $block.hide();
                break;
            case false:
                $block.show();
                break;
        }

        switch (isDisabled) {
            case true:
                $block.find('input, select').each(function() {
                    $(this).prop('disabled', true);
                });
                break;
            case false:
                $block.find('input, select').each(function() {
                    $(this).prop('disabled', false);
                });
                $block.find('[data-disabled]').each(function() {
                    visibilityBlock($(this), true, true);
                });
                break;
        }
    }
</script>
